{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Device = exports.detectDevice = void 0;\nconst bowser_1 = __importDefault(require(\"bowser\"));\nconst Logger_1 = require(\"./Logger\");\nconst EnhancedEventEmitter_1 = require(\"./EnhancedEventEmitter\");\nconst errors_1 = require(\"./errors\");\nconst utils = __importStar(require(\"./utils\"));\nconst ortc = __importStar(require(\"./ortc\"));\nconst Transport_1 = require(\"./Transport\");\nconst Chrome74_1 = require(\"./handlers/Chrome74\");\nconst Chrome70_1 = require(\"./handlers/Chrome70\");\nconst Chrome67_1 = require(\"./handlers/Chrome67\");\nconst Chrome55_1 = require(\"./handlers/Chrome55\");\nconst Firefox60_1 = require(\"./handlers/Firefox60\");\nconst Safari12_1 = require(\"./handlers/Safari12\");\nconst Safari11_1 = require(\"./handlers/Safari11\");\nconst Edge11_1 = require(\"./handlers/Edge11\");\nconst ReactNativeUnifiedPlan_1 = require(\"./handlers/ReactNativeUnifiedPlan\");\nconst ReactNative_1 = require(\"./handlers/ReactNative\");\nconst logger = new Logger_1.Logger('Device');\nfunction detectDevice() {\n  // React-Native.\n  // NOTE: react-native-webrtc >= 1.75.0 is required.\n  // NOTE: react-native-webrtc with Unified Plan requires version >= 106.0.0.\n  if (typeof navigator === 'object' && navigator.product === 'ReactNative') {\n    if (typeof RTCPeerConnection === 'undefined') {\n      logger.warn('this._detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?');\n      return undefined;\n    }\n    if (typeof RTCRtpTransceiver !== 'undefined') {\n      logger.debug('this._detectDevice() | ReactNative UnifiedPlan handler chosen');\n      return 'ReactNativeUnifiedPlan';\n    } else {\n      logger.debug('this._detectDevice() | ReactNative PlanB handler chosen');\n      return 'ReactNative';\n    }\n  }\n  // Browser.\n  else if (typeof navigator === 'object' && typeof navigator.userAgent === 'string') {\n    const ua = navigator.userAgent;\n    const browser = bowser_1.default.getParser(ua);\n    const engine = browser.getEngine();\n    // Chrome, Chromium, and Edge.\n    if (browser.satisfies({\n      chrome: '>=74',\n      chromium: '>=74',\n      'microsoft edge': '>=88'\n    })) {\n      return 'Chrome74';\n    } else if (browser.satisfies({\n      chrome: '>=70',\n      chromium: '>=70'\n    })) {\n      return 'Chrome70';\n    } else if (browser.satisfies({\n      chrome: '>=67',\n      chromium: '>=67'\n    })) {\n      return 'Chrome67';\n    } else if (browser.satisfies({\n      chrome: '>=55',\n      chromium: '>=55'\n    })) {\n      return 'Chrome55';\n    }\n    // Firefox.\n    else if (browser.satisfies({\n      firefox: '>=60'\n    })) {\n      return 'Firefox60';\n    }\n    // Firefox on iOS.\n    else if (browser.satisfies({\n      ios: {\n        OS: '>=14.3',\n        firefox: '>=30.0'\n      }\n    })) {\n      return 'Safari12';\n    }\n    // Safari with Unified-Plan support enabled.\n    else if (browser.satisfies({\n      safari: '>=12.0'\n    }) && typeof RTCRtpTransceiver !== 'undefined' && RTCRtpTransceiver.prototype.hasOwnProperty('currentDirection')) {\n      return 'Safari12';\n    }\n    // Safari with Plab-B support.\n    else if (browser.satisfies({\n      safari: '>=11'\n    })) {\n      return 'Safari11';\n    }\n    // Old Edge with ORTC support.\n    else if (browser.satisfies({\n      'microsoft edge': '>=11'\n    }) && browser.satisfies({\n      'microsoft edge': '<=18'\n    })) {\n      return 'Edge11';\n    }\n    // Best effort for Chromium based browsers.\n    else if (engine.name && engine.name.toLowerCase() === 'blink') {\n      const match = ua.match(/(?:(?:Chrome|Chromium))[ /](\\w+)/i);\n      if (match) {\n        const version = Number(match[1]);\n        if (version >= 74) {\n          return 'Chrome74';\n        } else if (version >= 70) {\n          return 'Chrome70';\n        } else if (version >= 67) {\n          return 'Chrome67';\n        } else {\n          return 'Chrome55';\n        }\n      } else {\n        return 'Chrome74';\n      }\n    }\n    // Unsupported browser.\n    else {\n      logger.warn('this._detectDevice() | browser not supported [name:%s, version:%s]', browser.getBrowserName(), browser.getBrowserVersion());\n      return undefined;\n    }\n  }\n  // Unknown device.\n  else {\n    logger.warn('this._detectDevice() | unknown device');\n    return undefined;\n  }\n}\nexports.detectDevice = detectDevice;\nclass Device {\n  /**\n   * Create a new Device to connect to mediasoup server.\n   *\n   * @throws {UnsupportedError} if device is not supported.\n   */\n  constructor() {\n    let {\n      handlerName,\n      handlerFactory,\n      Handler\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // Loaded flag.\n    this._loaded = false;\n    // Observer instance.\n    this._observer = new EnhancedEventEmitter_1.EnhancedEventEmitter();\n    logger.debug('constructor()');\n    // Handle deprecated option.\n    if (Handler) {\n      logger.warn('constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead');\n      if (typeof Handler === 'string') {\n        handlerName = Handler;\n      } else {\n        throw new TypeError('non string Handler option no longer supported, use handlerFactory instead');\n      }\n    }\n    if (handlerName && handlerFactory) {\n      throw new TypeError('just one of handlerName or handlerInterface can be given');\n    }\n    if (handlerFactory) {\n      this._handlerFactory = handlerFactory;\n    } else {\n      if (handlerName) {\n        logger.debug('constructor() | handler given: %s', handlerName);\n      } else {\n        handlerName = detectDevice();\n        if (handlerName) {\n          logger.debug('constructor() | detected handler: %s', handlerName);\n        } else {\n          throw new errors_1.UnsupportedError('device not supported');\n        }\n      }\n      switch (handlerName) {\n        case 'Chrome74':\n          this._handlerFactory = Chrome74_1.Chrome74.createFactory();\n          break;\n        case 'Chrome70':\n          this._handlerFactory = Chrome70_1.Chrome70.createFactory();\n          break;\n        case 'Chrome67':\n          this._handlerFactory = Chrome67_1.Chrome67.createFactory();\n          break;\n        case 'Chrome55':\n          this._handlerFactory = Chrome55_1.Chrome55.createFactory();\n          break;\n        case 'Firefox60':\n          this._handlerFactory = Firefox60_1.Firefox60.createFactory();\n          break;\n        case 'Safari12':\n          this._handlerFactory = Safari12_1.Safari12.createFactory();\n          break;\n        case 'Safari11':\n          this._handlerFactory = Safari11_1.Safari11.createFactory();\n          break;\n        case 'Edge11':\n          this._handlerFactory = Edge11_1.Edge11.createFactory();\n          break;\n        case 'ReactNativeUnifiedPlan':\n          this._handlerFactory = ReactNativeUnifiedPlan_1.ReactNativeUnifiedPlan.createFactory();\n          break;\n        case 'ReactNative':\n          this._handlerFactory = ReactNative_1.ReactNative.createFactory();\n          break;\n        default:\n          throw new TypeError(`unknown handlerName \"${handlerName}\"`);\n      }\n    }\n    // Create a temporal handler to get its name.\n    const handler = this._handlerFactory();\n    this._handlerName = handler.name;\n    handler.close();\n    this._extendedRtpCapabilities = undefined;\n    this._recvRtpCapabilities = undefined;\n    this._canProduceByKind = {\n      audio: false,\n      video: false\n    };\n    this._sctpCapabilities = undefined;\n  }\n  /**\n   * The RTC handler name.\n   */\n  get handlerName() {\n    return this._handlerName;\n  }\n  /**\n   * Whether the Device is loaded.\n   */\n  get loaded() {\n    return this._loaded;\n  }\n  /**\n   * RTP capabilities of the Device for receiving media.\n   *\n   * @throws {InvalidStateError} if not loaded.\n   */\n  get rtpCapabilities() {\n    if (!this._loaded) throw new errors_1.InvalidStateError('not loaded');\n    return this._recvRtpCapabilities;\n  }\n  /**\n   * SCTP capabilities of the Device.\n   *\n   * @throws {InvalidStateError} if not loaded.\n   */\n  get sctpCapabilities() {\n    if (!this._loaded) throw new errors_1.InvalidStateError('not loaded');\n    return this._sctpCapabilities;\n  }\n  get observer() {\n    return this._observer;\n  }\n  /**\n   * Initialize the Device.\n   */\n  async load(_ref) {\n    let {\n      routerRtpCapabilities\n    } = _ref;\n    logger.debug('load() [routerRtpCapabilities:%o]', routerRtpCapabilities);\n    routerRtpCapabilities = utils.clone(routerRtpCapabilities, undefined);\n    // Temporal handler to get its capabilities.\n    let handler;\n    try {\n      if (this._loaded) {\n        throw new errors_1.InvalidStateError('already loaded');\n      }\n      // This may throw.\n      ortc.validateRtpCapabilities(routerRtpCapabilities);\n      handler = this._handlerFactory();\n      const nativeRtpCapabilities = await handler.getNativeRtpCapabilities();\n      logger.debug('load() | got native RTP capabilities:%o', nativeRtpCapabilities);\n      // This may throw.\n      ortc.validateRtpCapabilities(nativeRtpCapabilities);\n      // Get extended RTP capabilities.\n      this._extendedRtpCapabilities = ortc.getExtendedRtpCapabilities(nativeRtpCapabilities, routerRtpCapabilities);\n      logger.debug('load() | got extended RTP capabilities:%o', this._extendedRtpCapabilities);\n      // Check whether we can produce audio/video.\n      this._canProduceByKind.audio = ortc.canSend('audio', this._extendedRtpCapabilities);\n      this._canProduceByKind.video = ortc.canSend('video', this._extendedRtpCapabilities);\n      // Generate our receiving RTP capabilities for receiving media.\n      this._recvRtpCapabilities = ortc.getRecvRtpCapabilities(this._extendedRtpCapabilities);\n      // This may throw.\n      ortc.validateRtpCapabilities(this._recvRtpCapabilities);\n      logger.debug('load() | got receiving RTP capabilities:%o', this._recvRtpCapabilities);\n      // Generate our SCTP capabilities.\n      this._sctpCapabilities = await handler.getNativeSctpCapabilities();\n      logger.debug('load() | got native SCTP capabilities:%o', this._sctpCapabilities);\n      // This may throw.\n      ortc.validateSctpCapabilities(this._sctpCapabilities);\n      logger.debug('load() succeeded');\n      this._loaded = true;\n      handler.close();\n    } catch (error) {\n      if (handler) handler.close();\n      throw error;\n    }\n  }\n  /**\n   * Whether we can produce audio/video.\n   *\n   * @throws {InvalidStateError} if not loaded.\n   * @throws {TypeError} if wrong arguments.\n   */\n  canProduce(kind) {\n    if (!this._loaded) throw new errors_1.InvalidStateError('not loaded');else if (kind !== 'audio' && kind !== 'video') throw new TypeError(`invalid kind \"${kind}\"`);\n    return this._canProduceByKind[kind];\n  }\n  /**\n   * Creates a Transport for sending media.\n   *\n   * @throws {InvalidStateError} if not loaded.\n   * @throws {TypeError} if wrong arguments.\n   */\n  createSendTransport(_ref2) {\n    let {\n      id,\n      iceParameters,\n      iceCandidates,\n      dtlsParameters,\n      sctpParameters,\n      iceServers,\n      iceTransportPolicy,\n      additionalSettings,\n      proprietaryConstraints,\n      appData\n    } = _ref2;\n    logger.debug('createSendTransport()');\n    return this.createTransport({\n      direction: 'send',\n      id: id,\n      iceParameters: iceParameters,\n      iceCandidates: iceCandidates,\n      dtlsParameters: dtlsParameters,\n      sctpParameters: sctpParameters,\n      iceServers: iceServers,\n      iceTransportPolicy: iceTransportPolicy,\n      additionalSettings: additionalSettings,\n      proprietaryConstraints: proprietaryConstraints,\n      appData: appData\n    });\n  }\n  /**\n   * Creates a Transport for receiving media.\n   *\n   * @throws {InvalidStateError} if not loaded.\n   * @throws {TypeError} if wrong arguments.\n   */\n  createRecvTransport(_ref3) {\n    let {\n      id,\n      iceParameters,\n      iceCandidates,\n      dtlsParameters,\n      sctpParameters,\n      iceServers,\n      iceTransportPolicy,\n      additionalSettings,\n      proprietaryConstraints,\n      appData\n    } = _ref3;\n    logger.debug('createRecvTransport()');\n    return this.createTransport({\n      direction: 'recv',\n      id: id,\n      iceParameters: iceParameters,\n      iceCandidates: iceCandidates,\n      dtlsParameters: dtlsParameters,\n      sctpParameters: sctpParameters,\n      iceServers: iceServers,\n      iceTransportPolicy: iceTransportPolicy,\n      additionalSettings: additionalSettings,\n      proprietaryConstraints: proprietaryConstraints,\n      appData: appData\n    });\n  }\n  createTransport(_ref4) {\n    let {\n      direction,\n      id,\n      iceParameters,\n      iceCandidates,\n      dtlsParameters,\n      sctpParameters,\n      iceServers,\n      iceTransportPolicy,\n      additionalSettings,\n      proprietaryConstraints,\n      appData\n    } = _ref4;\n    if (!this._loaded) throw new errors_1.InvalidStateError('not loaded');else if (typeof id !== 'string') throw new TypeError('missing id');else if (typeof iceParameters !== 'object') throw new TypeError('missing iceParameters');else if (!Array.isArray(iceCandidates)) throw new TypeError('missing iceCandidates');else if (typeof dtlsParameters !== 'object') throw new TypeError('missing dtlsParameters');else if (sctpParameters && typeof sctpParameters !== 'object') throw new TypeError('wrong sctpParameters');else if (appData && typeof appData !== 'object') throw new TypeError('if given, appData must be an object');\n    // Create a new Transport.\n    const transport = new Transport_1.Transport({\n      direction,\n      id,\n      iceParameters,\n      iceCandidates,\n      dtlsParameters,\n      sctpParameters,\n      iceServers,\n      iceTransportPolicy,\n      additionalSettings,\n      proprietaryConstraints,\n      appData,\n      handlerFactory: this._handlerFactory,\n      extendedRtpCapabilities: this._extendedRtpCapabilities,\n      canProduceByKind: this._canProduceByKind\n    });\n    // Emit observer event.\n    this._observer.safeEmit('newtransport', transport);\n    return transport;\n  }\n}\nexports.Device = Device;","map":{"version":3,"names":["__createBinding","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","__importDefault","exports","Device","detectDevice","bowser_1","require","Logger_1","EnhancedEventEmitter_1","errors_1","utils","ortc","Transport_1","Chrome74_1","Chrome70_1","Chrome67_1","Chrome55_1","Firefox60_1","Safari12_1","Safari11_1","Edge11_1","ReactNativeUnifiedPlan_1","ReactNative_1","logger","Logger","navigator","product","RTCPeerConnection","warn","RTCRtpTransceiver","debug","userAgent","ua","browser","default","getParser","engine","getEngine","satisfies","chrome","chromium","firefox","ios","OS","safari","name","toLowerCase","match","version","Number","getBrowserName","getBrowserVersion","constructor","handlerName","handlerFactory","Handler","_loaded","_observer","EnhancedEventEmitter","TypeError","_handlerFactory","UnsupportedError","Chrome74","createFactory","Chrome70","Chrome67","Chrome55","Firefox60","Safari12","Safari11","Edge11","ReactNativeUnifiedPlan","ReactNative","handler","_handlerName","close","_extendedRtpCapabilities","_recvRtpCapabilities","_canProduceByKind","audio","video","_sctpCapabilities","loaded","rtpCapabilities","InvalidStateError","sctpCapabilities","observer","load","routerRtpCapabilities","clone","validateRtpCapabilities","nativeRtpCapabilities","getNativeRtpCapabilities","getExtendedRtpCapabilities","canSend","getRecvRtpCapabilities","getNativeSctpCapabilities","validateSctpCapabilities","error","canProduce","kind","createSendTransport","id","iceParameters","iceCandidates","dtlsParameters","sctpParameters","iceServers","iceTransportPolicy","additionalSettings","proprietaryConstraints","appData","createTransport","direction","createRecvTransport","Array","isArray","transport","Transport","extendedRtpCapabilities","canProduceByKind","safeEmit"],"sources":["/Users/user/Desktop/solana-hack-1/client/node_modules/mediasoup-client/lib/Device.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Device = exports.detectDevice = void 0;\nconst bowser_1 = __importDefault(require(\"bowser\"));\nconst Logger_1 = require(\"./Logger\");\nconst EnhancedEventEmitter_1 = require(\"./EnhancedEventEmitter\");\nconst errors_1 = require(\"./errors\");\nconst utils = __importStar(require(\"./utils\"));\nconst ortc = __importStar(require(\"./ortc\"));\nconst Transport_1 = require(\"./Transport\");\nconst Chrome74_1 = require(\"./handlers/Chrome74\");\nconst Chrome70_1 = require(\"./handlers/Chrome70\");\nconst Chrome67_1 = require(\"./handlers/Chrome67\");\nconst Chrome55_1 = require(\"./handlers/Chrome55\");\nconst Firefox60_1 = require(\"./handlers/Firefox60\");\nconst Safari12_1 = require(\"./handlers/Safari12\");\nconst Safari11_1 = require(\"./handlers/Safari11\");\nconst Edge11_1 = require(\"./handlers/Edge11\");\nconst ReactNativeUnifiedPlan_1 = require(\"./handlers/ReactNativeUnifiedPlan\");\nconst ReactNative_1 = require(\"./handlers/ReactNative\");\nconst logger = new Logger_1.Logger('Device');\nfunction detectDevice() {\n    // React-Native.\n    // NOTE: react-native-webrtc >= 1.75.0 is required.\n    // NOTE: react-native-webrtc with Unified Plan requires version >= 106.0.0.\n    if (typeof navigator === 'object' && navigator.product === 'ReactNative') {\n        if (typeof RTCPeerConnection === 'undefined') {\n            logger.warn('this._detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?');\n            return undefined;\n        }\n        if (typeof RTCRtpTransceiver !== 'undefined') {\n            logger.debug('this._detectDevice() | ReactNative UnifiedPlan handler chosen');\n            return 'ReactNativeUnifiedPlan';\n        }\n        else {\n            logger.debug('this._detectDevice() | ReactNative PlanB handler chosen');\n            return 'ReactNative';\n        }\n    }\n    // Browser.\n    else if (typeof navigator === 'object' && typeof navigator.userAgent === 'string') {\n        const ua = navigator.userAgent;\n        const browser = bowser_1.default.getParser(ua);\n        const engine = browser.getEngine();\n        // Chrome, Chromium, and Edge.\n        if (browser.satisfies({ chrome: '>=74', chromium: '>=74', 'microsoft edge': '>=88' })) {\n            return 'Chrome74';\n        }\n        else if (browser.satisfies({ chrome: '>=70', chromium: '>=70' })) {\n            return 'Chrome70';\n        }\n        else if (browser.satisfies({ chrome: '>=67', chromium: '>=67' })) {\n            return 'Chrome67';\n        }\n        else if (browser.satisfies({ chrome: '>=55', chromium: '>=55' })) {\n            return 'Chrome55';\n        }\n        // Firefox.\n        else if (browser.satisfies({ firefox: '>=60' })) {\n            return 'Firefox60';\n        }\n        // Firefox on iOS.\n        else if (browser.satisfies({ ios: { OS: '>=14.3', firefox: '>=30.0' } })) {\n            return 'Safari12';\n        }\n        // Safari with Unified-Plan support enabled.\n        else if (browser.satisfies({ safari: '>=12.0' }) &&\n            typeof RTCRtpTransceiver !== 'undefined' &&\n            RTCRtpTransceiver.prototype.hasOwnProperty('currentDirection')) {\n            return 'Safari12';\n        }\n        // Safari with Plab-B support.\n        else if (browser.satisfies({ safari: '>=11' })) {\n            return 'Safari11';\n        }\n        // Old Edge with ORTC support.\n        else if (browser.satisfies({ 'microsoft edge': '>=11' }) &&\n            browser.satisfies({ 'microsoft edge': '<=18' })) {\n            return 'Edge11';\n        }\n        // Best effort for Chromium based browsers.\n        else if (engine.name && engine.name.toLowerCase() === 'blink') {\n            const match = ua.match(/(?:(?:Chrome|Chromium))[ /](\\w+)/i);\n            if (match) {\n                const version = Number(match[1]);\n                if (version >= 74) {\n                    return 'Chrome74';\n                }\n                else if (version >= 70) {\n                    return 'Chrome70';\n                }\n                else if (version >= 67) {\n                    return 'Chrome67';\n                }\n                else {\n                    return 'Chrome55';\n                }\n            }\n            else {\n                return 'Chrome74';\n            }\n        }\n        // Unsupported browser.\n        else {\n            logger.warn('this._detectDevice() | browser not supported [name:%s, version:%s]', browser.getBrowserName(), browser.getBrowserVersion());\n            return undefined;\n        }\n    }\n    // Unknown device.\n    else {\n        logger.warn('this._detectDevice() | unknown device');\n        return undefined;\n    }\n}\nexports.detectDevice = detectDevice;\nclass Device {\n    /**\n     * Create a new Device to connect to mediasoup server.\n     *\n     * @throws {UnsupportedError} if device is not supported.\n     */\n    constructor({ handlerName, handlerFactory, Handler } = {}) {\n        // Loaded flag.\n        this._loaded = false;\n        // Observer instance.\n        this._observer = new EnhancedEventEmitter_1.EnhancedEventEmitter();\n        logger.debug('constructor()');\n        // Handle deprecated option.\n        if (Handler) {\n            logger.warn('constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead');\n            if (typeof Handler === 'string') {\n                handlerName = Handler;\n            }\n            else {\n                throw new TypeError('non string Handler option no longer supported, use handlerFactory instead');\n            }\n        }\n        if (handlerName && handlerFactory) {\n            throw new TypeError('just one of handlerName or handlerInterface can be given');\n        }\n        if (handlerFactory) {\n            this._handlerFactory = handlerFactory;\n        }\n        else {\n            if (handlerName) {\n                logger.debug('constructor() | handler given: %s', handlerName);\n            }\n            else {\n                handlerName = detectDevice();\n                if (handlerName) {\n                    logger.debug('constructor() | detected handler: %s', handlerName);\n                }\n                else {\n                    throw new errors_1.UnsupportedError('device not supported');\n                }\n            }\n            switch (handlerName) {\n                case 'Chrome74':\n                    this._handlerFactory = Chrome74_1.Chrome74.createFactory();\n                    break;\n                case 'Chrome70':\n                    this._handlerFactory = Chrome70_1.Chrome70.createFactory();\n                    break;\n                case 'Chrome67':\n                    this._handlerFactory = Chrome67_1.Chrome67.createFactory();\n                    break;\n                case 'Chrome55':\n                    this._handlerFactory = Chrome55_1.Chrome55.createFactory();\n                    break;\n                case 'Firefox60':\n                    this._handlerFactory = Firefox60_1.Firefox60.createFactory();\n                    break;\n                case 'Safari12':\n                    this._handlerFactory = Safari12_1.Safari12.createFactory();\n                    break;\n                case 'Safari11':\n                    this._handlerFactory = Safari11_1.Safari11.createFactory();\n                    break;\n                case 'Edge11':\n                    this._handlerFactory = Edge11_1.Edge11.createFactory();\n                    break;\n                case 'ReactNativeUnifiedPlan':\n                    this._handlerFactory = ReactNativeUnifiedPlan_1.ReactNativeUnifiedPlan.createFactory();\n                    break;\n                case 'ReactNative':\n                    this._handlerFactory = ReactNative_1.ReactNative.createFactory();\n                    break;\n                default:\n                    throw new TypeError(`unknown handlerName \"${handlerName}\"`);\n            }\n        }\n        // Create a temporal handler to get its name.\n        const handler = this._handlerFactory();\n        this._handlerName = handler.name;\n        handler.close();\n        this._extendedRtpCapabilities = undefined;\n        this._recvRtpCapabilities = undefined;\n        this._canProduceByKind =\n            {\n                audio: false,\n                video: false\n            };\n        this._sctpCapabilities = undefined;\n    }\n    /**\n     * The RTC handler name.\n     */\n    get handlerName() {\n        return this._handlerName;\n    }\n    /**\n     * Whether the Device is loaded.\n     */\n    get loaded() {\n        return this._loaded;\n    }\n    /**\n     * RTP capabilities of the Device for receiving media.\n     *\n     * @throws {InvalidStateError} if not loaded.\n     */\n    get rtpCapabilities() {\n        if (!this._loaded)\n            throw new errors_1.InvalidStateError('not loaded');\n        return this._recvRtpCapabilities;\n    }\n    /**\n     * SCTP capabilities of the Device.\n     *\n     * @throws {InvalidStateError} if not loaded.\n     */\n    get sctpCapabilities() {\n        if (!this._loaded)\n            throw new errors_1.InvalidStateError('not loaded');\n        return this._sctpCapabilities;\n    }\n    get observer() {\n        return this._observer;\n    }\n    /**\n     * Initialize the Device.\n     */\n    async load({ routerRtpCapabilities }) {\n        logger.debug('load() [routerRtpCapabilities:%o]', routerRtpCapabilities);\n        routerRtpCapabilities = utils.clone(routerRtpCapabilities, undefined);\n        // Temporal handler to get its capabilities.\n        let handler;\n        try {\n            if (this._loaded) {\n                throw new errors_1.InvalidStateError('already loaded');\n            }\n            // This may throw.\n            ortc.validateRtpCapabilities(routerRtpCapabilities);\n            handler = this._handlerFactory();\n            const nativeRtpCapabilities = await handler.getNativeRtpCapabilities();\n            logger.debug('load() | got native RTP capabilities:%o', nativeRtpCapabilities);\n            // This may throw.\n            ortc.validateRtpCapabilities(nativeRtpCapabilities);\n            // Get extended RTP capabilities.\n            this._extendedRtpCapabilities = ortc.getExtendedRtpCapabilities(nativeRtpCapabilities, routerRtpCapabilities);\n            logger.debug('load() | got extended RTP capabilities:%o', this._extendedRtpCapabilities);\n            // Check whether we can produce audio/video.\n            this._canProduceByKind.audio =\n                ortc.canSend('audio', this._extendedRtpCapabilities);\n            this._canProduceByKind.video =\n                ortc.canSend('video', this._extendedRtpCapabilities);\n            // Generate our receiving RTP capabilities for receiving media.\n            this._recvRtpCapabilities =\n                ortc.getRecvRtpCapabilities(this._extendedRtpCapabilities);\n            // This may throw.\n            ortc.validateRtpCapabilities(this._recvRtpCapabilities);\n            logger.debug('load() | got receiving RTP capabilities:%o', this._recvRtpCapabilities);\n            // Generate our SCTP capabilities.\n            this._sctpCapabilities = await handler.getNativeSctpCapabilities();\n            logger.debug('load() | got native SCTP capabilities:%o', this._sctpCapabilities);\n            // This may throw.\n            ortc.validateSctpCapabilities(this._sctpCapabilities);\n            logger.debug('load() succeeded');\n            this._loaded = true;\n            handler.close();\n        }\n        catch (error) {\n            if (handler)\n                handler.close();\n            throw error;\n        }\n    }\n    /**\n     * Whether we can produce audio/video.\n     *\n     * @throws {InvalidStateError} if not loaded.\n     * @throws {TypeError} if wrong arguments.\n     */\n    canProduce(kind) {\n        if (!this._loaded)\n            throw new errors_1.InvalidStateError('not loaded');\n        else if (kind !== 'audio' && kind !== 'video')\n            throw new TypeError(`invalid kind \"${kind}\"`);\n        return this._canProduceByKind[kind];\n    }\n    /**\n     * Creates a Transport for sending media.\n     *\n     * @throws {InvalidStateError} if not loaded.\n     * @throws {TypeError} if wrong arguments.\n     */\n    createSendTransport({ id, iceParameters, iceCandidates, dtlsParameters, sctpParameters, iceServers, iceTransportPolicy, additionalSettings, proprietaryConstraints, appData }) {\n        logger.debug('createSendTransport()');\n        return this.createTransport({\n            direction: 'send',\n            id: id,\n            iceParameters: iceParameters,\n            iceCandidates: iceCandidates,\n            dtlsParameters: dtlsParameters,\n            sctpParameters: sctpParameters,\n            iceServers: iceServers,\n            iceTransportPolicy: iceTransportPolicy,\n            additionalSettings: additionalSettings,\n            proprietaryConstraints: proprietaryConstraints,\n            appData: appData\n        });\n    }\n    /**\n     * Creates a Transport for receiving media.\n     *\n     * @throws {InvalidStateError} if not loaded.\n     * @throws {TypeError} if wrong arguments.\n     */\n    createRecvTransport({ id, iceParameters, iceCandidates, dtlsParameters, sctpParameters, iceServers, iceTransportPolicy, additionalSettings, proprietaryConstraints, appData }) {\n        logger.debug('createRecvTransport()');\n        return this.createTransport({\n            direction: 'recv',\n            id: id,\n            iceParameters: iceParameters,\n            iceCandidates: iceCandidates,\n            dtlsParameters: dtlsParameters,\n            sctpParameters: sctpParameters,\n            iceServers: iceServers,\n            iceTransportPolicy: iceTransportPolicy,\n            additionalSettings: additionalSettings,\n            proprietaryConstraints: proprietaryConstraints,\n            appData: appData\n        });\n    }\n    createTransport({ direction, id, iceParameters, iceCandidates, dtlsParameters, sctpParameters, iceServers, iceTransportPolicy, additionalSettings, proprietaryConstraints, appData }) {\n        if (!this._loaded)\n            throw new errors_1.InvalidStateError('not loaded');\n        else if (typeof id !== 'string')\n            throw new TypeError('missing id');\n        else if (typeof iceParameters !== 'object')\n            throw new TypeError('missing iceParameters');\n        else if (!Array.isArray(iceCandidates))\n            throw new TypeError('missing iceCandidates');\n        else if (typeof dtlsParameters !== 'object')\n            throw new TypeError('missing dtlsParameters');\n        else if (sctpParameters && typeof sctpParameters !== 'object')\n            throw new TypeError('wrong sctpParameters');\n        else if (appData && typeof appData !== 'object')\n            throw new TypeError('if given, appData must be an object');\n        // Create a new Transport.\n        const transport = new Transport_1.Transport({\n            direction,\n            id,\n            iceParameters,\n            iceCandidates,\n            dtlsParameters,\n            sctpParameters,\n            iceServers,\n            iceTransportPolicy,\n            additionalSettings,\n            proprietaryConstraints,\n            appData,\n            handlerFactory: this._handlerFactory,\n            extendedRtpCapabilities: this._extendedRtpCapabilities,\n            canProduceByKind: this._canProduceByKind\n        });\n        // Emit observer event.\n        this._observer.safeEmit('newtransport', transport);\n        return transport;\n    }\n}\nexports.Device = Device;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}