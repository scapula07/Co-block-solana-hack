{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HeartBeat = void 0;\nconst events_1 = require(\"events\");\nconst time_1 = require(\"@walletconnect/time\");\nconst types_1 = require(\"./types\");\nconst constants_1 = require(\"./constants\");\nclass HeartBeat extends types_1.IHeartBeat {\n  constructor(opts) {\n    super(opts);\n    this.events = new events_1.EventEmitter();\n    this.interval = constants_1.HEARTBEAT_INTERVAL;\n    this.interval = (opts === null || opts === void 0 ? void 0 : opts.interval) || constants_1.HEARTBEAT_INTERVAL;\n  }\n  static init(opts) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const heartbeat = new HeartBeat(opts);\n      yield heartbeat.init();\n      return heartbeat;\n    });\n  }\n  init() {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.initialize();\n    });\n  }\n  on(event, listener) {\n    this.events.on(event, listener);\n  }\n  once(event, listener) {\n    this.events.once(event, listener);\n  }\n  off(event, listener) {\n    this.events.off(event, listener);\n  }\n  removeListener(event, listener) {\n    this.events.removeListener(event, listener);\n  }\n  initialize() {\n    return __awaiter(this, void 0, void 0, function* () {\n      setInterval(() => this.pulse(), time_1.toMiliseconds(this.interval));\n    });\n  }\n  pulse() {\n    this.events.emit(constants_1.HEARTBEAT_EVENTS.pulse);\n  }\n}\nexports.HeartBeat = HeartBeat;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AAEA;AAEA,MAAaA,SAAU,SAAQC,kBAAU;EAWvCC,YAAYC,IAAuB;IACjC,KAAK,CAACA,IAAI,CAAC;IALN,WAAM,GAAG,IAAIC,qBAAY,EAAE;IAE3B,aAAQ,GAAGC,8BAAkB;IAIlC,IAAI,CAACC,QAAQ,GAAG,KAAI,aAAJH,IAAI,uBAAJA,IAAI,CAAEG,QAAQ,KAAID,8BAAkB;EACtD;EAbA,OAAaE,IAAI,CAACJ,IAAuB;;MACvC,MAAMK,SAAS,GAAG,IAAIR,SAAS,CAACG,IAAI,CAAC;MACrC,MAAMK,SAAS,CAACD,IAAI,EAAE;MACtB,OAAOC,SAAS;IAClB,CAAC;;EAWYD,IAAI;;MACf,MAAM,IAAI,CAACE,UAAU,EAAE;IACzB,CAAC;;EAEMC,EAAE,CAACC,KAAa,EAAEC,QAAa;IACpC,IAAI,CAACC,MAAM,CAACH,EAAE,CAACC,KAAK,EAAEC,QAAQ,CAAC;EACjC;EAEOE,IAAI,CAACH,KAAa,EAAEC,QAAa;IACtC,IAAI,CAACC,MAAM,CAACC,IAAI,CAACH,KAAK,EAAEC,QAAQ,CAAC;EACnC;EAEOG,GAAG,CAACJ,KAAa,EAAEC,QAAa;IACrC,IAAI,CAACC,MAAM,CAACE,GAAG,CAACJ,KAAK,EAAEC,QAAQ,CAAC;EAClC;EAEOI,cAAc,CAACL,KAAa,EAAEC,QAAa;IAChD,IAAI,CAACC,MAAM,CAACG,cAAc,CAACL,KAAK,EAAEC,QAAQ,CAAC;EAC7C;EAIcH,UAAU;;MACtBQ,WAAW,CAAC,MAAM,IAAI,CAACC,KAAK,EAAE,EAAEC,oBAAa,CAAC,IAAI,CAACb,QAAQ,CAAC,CAAC;IAC/D,CAAC;;EAEOY,KAAK;IACX,IAAI,CAACL,MAAM,CAACO,IAAI,CAACf,4BAAgB,CAACa,KAAK,CAAC;EAC1C;;AA5CFG","names":["HeartBeat","types_1","constructor","opts","events_1","constants_1","interval","init","heartbeat","initialize","on","event","listener","events","once","off","removeListener","setInterval","pulse","time_1","emit","exports"],"sources":["../../src/heartbeat.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}