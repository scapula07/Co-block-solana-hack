{"ast":null,"code":"import { ConnectionManager } from \"./connection-manager.js\";\nimport { DEFAULT_POPUP_WIDTH_PX, DEFAULT_POPUP_HEIGHT_PX } from \"./core/constants.js\";\nimport { Platform } from \"./core/types.js\";\nimport { useCallback, useEffect, useRef, useState } from 'react';\nexport const usePopupConnection = function () {\n  let {\n    enabled = true,\n    platform = Platform.UNKNOWN,\n    widthPx = DEFAULT_POPUP_WIDTH_PX,\n    heightPx = DEFAULT_POPUP_HEIGHT_PX\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const [exportedConnection, setExportedConnection] = useState(undefined);\n  const connectionManagerRef = useRef(new ConnectionManager(platform).onConnectionUpdated(connection => {\n    setExportedConnection(connection === null || connection === void 0 ? void 0 : connection.export());\n  }));\n  const open = useCallback(url => {\n    connectionManagerRef.current.open({\n      heightPx,\n      url,\n      widthPx\n    });\n  }, [connectionManagerRef, widthPx, heightPx]);\n  const close = useCallback(() => {\n    connectionManagerRef.current.close();\n  }, [connectionManagerRef]);\n  useEffect(() => {\n    if (enabled) {\n      connectionManagerRef.current.initialize();\n    } else {\n      connectionManagerRef.current.tearDown();\n    }\n  }, [connectionManagerRef]);\n  return {\n    close,\n    connection: exportedConnection,\n    open\n  };\n};","map":{"version":3,"mappings":"AAAA,SAASA,iBAAiB,QAAE,yBAA2B;AAEvD,SACEC,sBAAsB,EACtBC,uBAAuB,QACxB,qBAAuB;AACxB,SAASC,QAAQ,QAAmB,iBAAmB;AACvD,SAASC,WAAW,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAShE,OAAO,MAAMC,kBAAkB,GAAG,YAKM;EAAA,IALL;IACjCC,OAAO,GAAG,IAAI;IACdC,QAAQ,GAAGP,QAAQ,CAACQ,OAAO;IAC3BC,OAAO,GAAGX,sBAAsB;IAChCY,QAAQ,GAAGX;EAAuB,wEACF,EAAE;EAClC,MAAM,CAACY,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGR,QAAQ,CAE1DS,SAAS,CAAC;EACZ,MAAMC,oBAAoB,GAAGX,MAAM,CACjC,IAAIN,iBAAiB,CAACU,QAAQ,CAAC,CAACQ,mBAAmB,CAChDC,UAA6B,IAAI;IAChCJ,qBAAqB,CAACI,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEC,MAAM,EAAE,CAAC;EAC7C,CAAC,CACF,CACF;EAED,MAAMC,IAAI,GAAGjB,WAAW,CACrBkB,GAAW,IAAI;IACdL,oBAAoB,CAACM,OAAO,CAACF,IAAI,CAAC;MAChCR,QAAQ;MACRS,GAAG;MACHV;KACD,CAAC;EACJ,CAAC,EACD,CAACK,oBAAoB,EAAEL,OAAO,EAAEC,QAAQ,CAAC,CAC1C;EAED,MAAMW,KAAK,GAAGpB,WAAW,CAAC,MAAK;IAC7Ba,oBAAoB,CAACM,OAAO,CAACC,KAAK,EAAE;EACtC,CAAC,EAAE,CAACP,oBAAoB,CAAC,CAAC;EAE1BZ,SAAS,CAAC,MAAK;IACb,IAAII,OAAO,EAAE;MACXQ,oBAAoB,CAACM,OAAO,CAACE,UAAU,EAAE;KAC1C,MAAM;MACLR,oBAAoB,CAACM,OAAO,CAACG,QAAQ,EAAE;;EAE3C,CAAC,EAAE,CAACT,oBAAoB,CAAC,CAAC;EAE1B,OAAO;IACLO,KAAK;IACLL,UAAU,EAAEL,kBAAkB;IAC9BO;GACD;AACH,CAAC","names":["ConnectionManager","DEFAULT_POPUP_WIDTH_PX","DEFAULT_POPUP_HEIGHT_PX","Platform","useCallback","useEffect","useRef","useState","usePopupConnection","enabled","platform","UNKNOWN","widthPx","heightPx","exportedConnection","setExportedConnection","undefined","connectionManagerRef","onConnectionUpdated","connection","export","open","url","current","close","initialize","tearDown"],"sources":["../../src/use-popup-connection.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}