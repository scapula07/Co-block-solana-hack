{"ast":null,"code":"import { BaseMessageSignerWalletAdapter, isVersionedTransaction, scopePollingDetectionStrategy, WalletAccountError, WalletConnectionError, WalletDisconnectedError, WalletDisconnectionError, WalletError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSendTransactionError, WalletSignMessageError, WalletSignTransactionError, isIosAndRedirectable } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nexport const PhantomWalletName = 'Phantom';\nexport class PhantomWalletAdapter extends BaseMessageSignerWalletAdapter {\n  constructor() {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n    this.name = PhantomWalletName;\n    this.url = 'https://phantom.app';\n    this.icon = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjM0IiB3aWR0aD0iMzQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iLjUiIHgyPSIuNSIgeTE9IjAiIHkyPSIxIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiM1MzRiYjEiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM1NTFiZjkiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDE9Ii41IiB4Mj0iLjUiIHkxPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii44MiIvPjwvbGluZWFyR3JhZGllbnQ+PGNpcmNsZSBjeD0iMTciIGN5PSIxNyIgZmlsbD0idXJsKCNhKSIgcj0iMTciLz48cGF0aCBkPSJtMjkuMTcwMiAxNy4yMDcxaC0yLjk5NjljMC02LjEwNzQtNC45NjgzLTExLjA1ODE3LTExLjA5NzUtMTEuMDU4MTctNi4wNTMyNSAwLTEwLjk3NDYzIDQuODI5NTctMTEuMDk1MDggMTAuODMyMzctLjEyNDYxIDYuMjA1IDUuNzE3NTIgMTEuNTkzMiAxMS45NDUzOCAxMS41OTMyaC43ODM0YzUuNDkwNiAwIDEyLjg0OTctNC4yODI5IDEzLjk5OTUtOS41MDEzLjIxMjMtLjk2MTktLjU1MDItMS44NjYxLTEuNTM4OC0xLjg2NjF6bS0xOC41NDc5LjI3MjFjMCAuODE2Ny0uNjcwMzggMS40ODQ3LTEuNDkwMDEgMS40ODQ3LS44MTk2NCAwLTEuNDg5OTgtLjY2ODMtMS40ODk5OC0xLjQ4NDd2LTIuNDAxOWMwLS44MTY3LjY3MDM0LTEuNDg0NyAxLjQ4OTk4LTEuNDg0Ny44MTk2MyAwIDEuNDkwMDEuNjY4IDEuNDkwMDEgMS40ODQ3em01LjE3MzggMGMwIC44MTY3LS42NzAzIDEuNDg0Ny0xLjQ4OTkgMS40ODQ3LS44MTk3IDAtMS40OS0uNjY4My0xLjQ5LTEuNDg0N3YtMi40MDE5YzAtLjgxNjcuNjcwNi0xLjQ4NDcgMS40OS0xLjQ4NDcuODE5NiAwIDEuNDg5OS42NjggMS40ODk5IDEuNDg0N3oiIGZpbGw9InVybCgjYikiLz48L3N2Zz4K';\n    this.supportedTransactionVersions = new Set(['legacy', 0]);\n    this._readyState = typeof window === 'undefined' || typeof document === 'undefined' ? WalletReadyState.Unsupported : WalletReadyState.NotDetected;\n    this._disconnected = () => {\n      const wallet = this._wallet;\n      if (wallet) {\n        wallet.off('disconnect', this._disconnected);\n        wallet.off('accountChanged', this._accountChanged);\n        this._wallet = null;\n        this._publicKey = null;\n        this.emit('error', new WalletDisconnectedError());\n        this.emit('disconnect');\n      }\n    };\n    this._accountChanged = newPublicKey => {\n      const publicKey = this._publicKey;\n      if (!publicKey) return;\n      try {\n        newPublicKey = new PublicKey(newPublicKey.toBytes());\n      } catch (error) {\n        this.emit('error', new WalletPublicKeyError(error?.message, error));\n        return;\n      }\n      if (publicKey.equals(newPublicKey)) return;\n      this._publicKey = newPublicKey;\n      this.emit('connect', newPublicKey);\n    };\n    this._connecting = false;\n    this._wallet = null;\n    this._publicKey = null;\n    if (this._readyState !== WalletReadyState.Unsupported) {\n      if (isIosAndRedirectable()) {\n        // when in iOS (not webview), set Phantom as loadable instead of checking for install\n        this._readyState = WalletReadyState.Loadable;\n        this.emit('readyStateChange', this._readyState);\n      } else {\n        scopePollingDetectionStrategy(() => {\n          if (window.phantom?.solana?.isPhantom || window.solana?.isPhantom) {\n            this._readyState = WalletReadyState.Installed;\n            this.emit('readyStateChange', this._readyState);\n            return true;\n          }\n          return false;\n        });\n      }\n    }\n  }\n  get publicKey() {\n    return this._publicKey;\n  }\n  get connecting() {\n    return this._connecting;\n  }\n  get connected() {\n    return !!this._wallet?.isConnected;\n  }\n  get readyState() {\n    return this._readyState;\n  }\n  async autoConnect() {\n    // Skip autoconnect in the Loadable state\n    // We can't redirect to a universal link without user input\n    if (this.readyState === WalletReadyState.Installed) {\n      await this.connect();\n    }\n  }\n  async connect() {\n    try {\n      if (this.connected || this.connecting) return;\n      if (this.readyState === WalletReadyState.Loadable) {\n        // redirect to the Phantom /browse universal link\n        // this will open the current URL in the Phantom in-wallet browser\n        const url = encodeURIComponent(window.location.href);\n        const ref = encodeURIComponent(window.location.origin);\n        window.location.href = `https://phantom.app/ul/browse/${url}?ref=${ref}`;\n        return;\n      }\n      if (this.readyState !== WalletReadyState.Installed) throw new WalletNotReadyError();\n      this._connecting = true;\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const wallet = window.phantom?.solana || window.solana;\n      if (!wallet.isConnected) {\n        try {\n          await wallet.connect();\n        } catch (error) {\n          throw new WalletConnectionError(error?.message, error);\n        }\n      }\n      if (!wallet.publicKey) throw new WalletAccountError();\n      let publicKey;\n      try {\n        publicKey = new PublicKey(wallet.publicKey.toBytes());\n      } catch (error) {\n        throw new WalletPublicKeyError(error?.message, error);\n      }\n      wallet.on('disconnect', this._disconnected);\n      wallet.on('accountChanged', this._accountChanged);\n      this._wallet = wallet;\n      this._publicKey = publicKey;\n      this.emit('connect', publicKey);\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    } finally {\n      this._connecting = false;\n    }\n  }\n  async disconnect() {\n    const wallet = this._wallet;\n    if (wallet) {\n      wallet.off('disconnect', this._disconnected);\n      wallet.off('accountChanged', this._accountChanged);\n      this._wallet = null;\n      this._publicKey = null;\n      try {\n        await wallet.disconnect();\n      } catch (error) {\n        this.emit('error', new WalletDisconnectionError(error?.message, error));\n      }\n    }\n    this.emit('disconnect');\n  }\n  async sendTransaction(transaction, connection) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        const {\n          signers,\n          ...sendOptions\n        } = options;\n        if (isVersionedTransaction(transaction)) {\n          signers?.length && transaction.sign(signers);\n        } else {\n          transaction = await this.prepareTransaction(transaction, connection, sendOptions);\n          signers?.length && transaction.partialSign(...signers);\n        }\n        sendOptions.preflightCommitment = sendOptions.preflightCommitment || connection.commitment;\n        const {\n          signature\n        } = await wallet.signAndSendTransaction(transaction, sendOptions);\n        return signature;\n      } catch (error) {\n        if (error instanceof WalletError) throw error;\n        throw new WalletSendTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signTransaction(transaction) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        return (await wallet.signTransaction(transaction)) || transaction;\n      } catch (error) {\n        throw new WalletSignTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signAllTransactions(transactions) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        return (await wallet.signAllTransactions(transactions)) || transactions;\n      } catch (error) {\n        throw new WalletSignTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signMessage(message) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        const {\n          signature\n        } = await wallet.signMessage(message);\n        return signature;\n      } catch (error) {\n        throw new WalletSignMessageError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n}","map":{"version":3,"mappings":"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","names":["BaseMessageSignerWalletAdapter","isVersionedTransaction","scopePollingDetectionStrategy","WalletAccountError","WalletConnectionError","WalletDisconnectedError","WalletDisconnectionError","WalletError","WalletNotConnectedError","WalletNotReadyError","WalletPublicKeyError","WalletReadyState","WalletSendTransactionError","WalletSignMessageError","WalletSignTransactionError","isIosAndRedirectable","PublicKey","PhantomWalletName","PhantomWalletAdapter","constructor","config","Set","window","document","Unsupported","NotDetected","wallet","_wallet","off","_disconnected","_accountChanged","_publicKey","emit","newPublicKey","publicKey","toBytes","error","message","equals","_connecting","_readyState","Loadable","phantom","solana","isPhantom","Installed","connecting","connected","isConnected","readyState","autoConnect","connect","url","encodeURIComponent","location","href","ref","origin","on","disconnect","sendTransaction","transaction","connection","options","signers","sendOptions","length","sign","prepareTransaction","partialSign","preflightCommitment","commitment","signature","signAndSendTransaction","signTransaction","signAllTransactions","transactions","signMessage"],"sources":["/Users/user/Desktop/solana-hack-1/client/node_modules/@solana/wallet-adapter-phantom/src/adapter.ts"],"sourcesContent":["import type { EventEmitter, SendTransactionOptions, WalletName } from '@solana/wallet-adapter-base';\nimport {\n    BaseMessageSignerWalletAdapter,\n    isVersionedTransaction,\n    scopePollingDetectionStrategy,\n    WalletAccountError,\n    WalletConnectionError,\n    WalletDisconnectedError,\n    WalletDisconnectionError,\n    WalletError,\n    WalletNotConnectedError,\n    WalletNotReadyError,\n    WalletPublicKeyError,\n    WalletReadyState,\n    WalletSendTransactionError,\n    WalletSignMessageError,\n    WalletSignTransactionError,\n    isIosAndRedirectable,\n} from '@solana/wallet-adapter-base';\nimport type {\n    Connection,\n    SendOptions,\n    Transaction,\n    TransactionSignature,\n    TransactionVersion,\n    VersionedTransaction,\n} from '@solana/web3.js';\nimport { PublicKey } from '@solana/web3.js';\n\ninterface PhantomWalletEvents {\n    connect(...args: unknown[]): unknown;\n    disconnect(...args: unknown[]): unknown;\n    accountChanged(newPublicKey: PublicKey): unknown;\n}\n\ninterface PhantomWallet extends EventEmitter<PhantomWalletEvents> {\n    isPhantom?: boolean;\n    publicKey?: { toBytes(): Uint8Array };\n    isConnected: boolean;\n    signTransaction<T extends Transaction | VersionedTransaction>(transaction: T): Promise<T>;\n    signAllTransactions<T extends Transaction | VersionedTransaction>(transactions: T[]): Promise<T[]>;\n    signAndSendTransaction<T extends Transaction | VersionedTransaction>(\n        transaction: T,\n        options?: SendOptions\n    ): Promise<{ signature: TransactionSignature }>;\n    signMessage(message: Uint8Array): Promise<{ signature: Uint8Array }>;\n    connect(): Promise<void>;\n    disconnect(): Promise<void>;\n}\n\ninterface PhantomWindow extends Window {\n    phantom?: {\n        solana?: PhantomWallet;\n    };\n    solana?: PhantomWallet;\n}\n\ndeclare const window: PhantomWindow;\n\nexport interface PhantomWalletAdapterConfig {}\n\nexport const PhantomWalletName = 'Phantom' as WalletName<'Phantom'>;\n\nexport class PhantomWalletAdapter extends BaseMessageSignerWalletAdapter {\n    name = PhantomWalletName;\n    url = 'https://phantom.app';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjM0IiB3aWR0aD0iMzQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iLjUiIHgyPSIuNSIgeTE9IjAiIHkyPSIxIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiM1MzRiYjEiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM1NTFiZjkiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDE9Ii41IiB4Mj0iLjUiIHkxPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii44MiIvPjwvbGluZWFyR3JhZGllbnQ+PGNpcmNsZSBjeD0iMTciIGN5PSIxNyIgZmlsbD0idXJsKCNhKSIgcj0iMTciLz48cGF0aCBkPSJtMjkuMTcwMiAxNy4yMDcxaC0yLjk5NjljMC02LjEwNzQtNC45NjgzLTExLjA1ODE3LTExLjA5NzUtMTEuMDU4MTctNi4wNTMyNSAwLTEwLjk3NDYzIDQuODI5NTctMTEuMDk1MDggMTAuODMyMzctLjEyNDYxIDYuMjA1IDUuNzE3NTIgMTEuNTkzMiAxMS45NDUzOCAxMS41OTMyaC43ODM0YzUuNDkwNiAwIDEyLjg0OTctNC4yODI5IDEzLjk5OTUtOS41MDEzLjIxMjMtLjk2MTktLjU1MDItMS44NjYxLTEuNTM4OC0xLjg2NjF6bS0xOC41NDc5LjI3MjFjMCAuODE2Ny0uNjcwMzggMS40ODQ3LTEuNDkwMDEgMS40ODQ3LS44MTk2NCAwLTEuNDg5OTgtLjY2ODMtMS40ODk5OC0xLjQ4NDd2LTIuNDAxOWMwLS44MTY3LjY3MDM0LTEuNDg0NyAxLjQ4OTk4LTEuNDg0Ny44MTk2MyAwIDEuNDkwMDEuNjY4IDEuNDkwMDEgMS40ODQ3em01LjE3MzggMGMwIC44MTY3LS42NzAzIDEuNDg0Ny0xLjQ4OTkgMS40ODQ3LS44MTk3IDAtMS40OS0uNjY4My0xLjQ5LTEuNDg0N3YtMi40MDE5YzAtLjgxNjcuNjcwNi0xLjQ4NDcgMS40OS0xLjQ4NDcuODE5NiAwIDEuNDg5OS42NjggMS40ODk5IDEuNDg0N3oiIGZpbGw9InVybCgjYikiLz48L3N2Zz4K';\n    supportedTransactionVersions: ReadonlySet<TransactionVersion> = new Set(['legacy', 0]);\n\n    private _connecting: boolean;\n    private _wallet: PhantomWallet | null;\n    private _publicKey: PublicKey | null;\n    private _readyState: WalletReadyState =\n        typeof window === 'undefined' || typeof document === 'undefined'\n            ? WalletReadyState.Unsupported\n            : WalletReadyState.NotDetected;\n\n    constructor(config: PhantomWalletAdapterConfig = {}) {\n        super();\n        this._connecting = false;\n        this._wallet = null;\n        this._publicKey = null;\n\n        if (this._readyState !== WalletReadyState.Unsupported) {\n            if (isIosAndRedirectable()) {\n                // when in iOS (not webview), set Phantom as loadable instead of checking for install\n                this._readyState = WalletReadyState.Loadable;\n                this.emit('readyStateChange', this._readyState);\n            } else {\n                scopePollingDetectionStrategy(() => {\n                    if (window.phantom?.solana?.isPhantom || window.solana?.isPhantom) {\n                        this._readyState = WalletReadyState.Installed;\n                        this.emit('readyStateChange', this._readyState);\n                        return true;\n                    }\n                    return false;\n                });\n            }\n        }\n    }\n\n    get publicKey() {\n        return this._publicKey;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    get connected() {\n        return !!this._wallet?.isConnected;\n    }\n\n    get readyState() {\n        return this._readyState;\n    }\n\n    async autoConnect(): Promise<void> {\n        // Skip autoconnect in the Loadable state\n        // We can't redirect to a universal link without user input\n        if (this.readyState === WalletReadyState.Installed) {\n            await this.connect();\n        }\n    }\n\n    async connect(): Promise<void> {\n        try {\n            if (this.connected || this.connecting) return;\n\n            if (this.readyState === WalletReadyState.Loadable) {\n                // redirect to the Phantom /browse universal link\n                // this will open the current URL in the Phantom in-wallet browser\n                const url = encodeURIComponent(window.location.href);\n                const ref = encodeURIComponent(window.location.origin);\n                window.location.href = `https://phantom.app/ul/browse/${url}?ref=${ref}`;\n                return;\n            }\n\n            if (this.readyState !== WalletReadyState.Installed) throw new WalletNotReadyError();\n\n            this._connecting = true;\n\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            const wallet = window.phantom?.solana || window.solana!;\n\n            if (!wallet.isConnected) {\n                try {\n                    await wallet.connect();\n                } catch (error: any) {\n                    throw new WalletConnectionError(error?.message, error);\n                }\n            }\n\n            if (!wallet.publicKey) throw new WalletAccountError();\n\n            let publicKey: PublicKey;\n            try {\n                publicKey = new PublicKey(wallet.publicKey.toBytes());\n            } catch (error: any) {\n                throw new WalletPublicKeyError(error?.message, error);\n            }\n\n            wallet.on('disconnect', this._disconnected);\n            wallet.on('accountChanged', this._accountChanged);\n\n            this._wallet = wallet;\n            this._publicKey = publicKey;\n\n            this.emit('connect', publicKey);\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        const wallet = this._wallet;\n        if (wallet) {\n            wallet.off('disconnect', this._disconnected);\n            wallet.off('accountChanged', this._accountChanged);\n\n            this._wallet = null;\n            this._publicKey = null;\n\n            try {\n                await wallet.disconnect();\n            } catch (error: any) {\n                this.emit('error', new WalletDisconnectionError(error?.message, error));\n            }\n        }\n\n        this.emit('disconnect');\n    }\n\n    async sendTransaction<T extends Transaction | VersionedTransaction>(\n        transaction: T,\n        connection: Connection,\n        options: SendTransactionOptions = {}\n    ): Promise<TransactionSignature> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                const { signers, ...sendOptions } = options;\n\n                if (isVersionedTransaction(transaction)) {\n                    signers?.length && transaction.sign(signers);\n                } else {\n                    transaction = (await this.prepareTransaction(transaction, connection, sendOptions)) as T;\n                    signers?.length && (transaction as Transaction).partialSign(...signers);\n                }\n\n                sendOptions.preflightCommitment = sendOptions.preflightCommitment || connection.commitment;\n\n                const { signature } = await wallet.signAndSendTransaction(transaction, sendOptions);\n                return signature;\n            } catch (error: any) {\n                if (error instanceof WalletError) throw error;\n                throw new WalletSendTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signTransaction<T extends Transaction | VersionedTransaction>(transaction: T): Promise<T> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                return (await wallet.signTransaction(transaction)) || transaction;\n            } catch (error: any) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signAllTransactions<T extends Transaction | VersionedTransaction>(transactions: T[]): Promise<T[]> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                return (await wallet.signAllTransactions(transactions)) || transactions;\n            } catch (error: any) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: Uint8Array): Promise<Uint8Array> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                const { signature } = await wallet.signMessage(message);\n                return signature;\n            } catch (error: any) {\n                throw new WalletSignMessageError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    private _disconnected = () => {\n        const wallet = this._wallet;\n        if (wallet) {\n            wallet.off('disconnect', this._disconnected);\n            wallet.off('accountChanged', this._accountChanged);\n\n            this._wallet = null;\n            this._publicKey = null;\n\n            this.emit('error', new WalletDisconnectedError());\n            this.emit('disconnect');\n        }\n    };\n\n    private _accountChanged = (newPublicKey: PublicKey) => {\n        const publicKey = this._publicKey;\n        if (!publicKey) return;\n\n        try {\n            newPublicKey = new PublicKey(newPublicKey.toBytes());\n        } catch (error: any) {\n            this.emit('error', new WalletPublicKeyError(error?.message, error));\n            return;\n        }\n\n        if (publicKey.equals(newPublicKey)) return;\n\n        this._publicKey = newPublicKey;\n        this.emit('connect', newPublicKey);\n    };\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}